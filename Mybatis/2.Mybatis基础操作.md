# Mybatis基础操作

### 查询
[1. 查询所有]()
[2. 查看详情](#table1)


1. 查询所有

```java
// API 接口，与mapper.xml文件必须同名，且在同一个路径下
public interface UserMapper {
    List<User> selectALL(); // 无参数
}
```
```xml
<!-- mapper-config.xml 关键配置文件-->
<mappers>
    <!-- sql映射文件：这个映射文件可以加入多个不同的resource源 -->
    <mapper resource="com/kxfevr/mapper/UserMapper.xml"/>
    <mapper resource="com/kxfevr/mapper/BrandMapper.xml"/>
</mappers>

<!-- 
    mapper.xml
    由于Brand.java 实体类中的属性命名和database table中的命名不同
    有些属性无法自动挂载数据，我们可以通过：
    1. 起别名的方式：可以加入sql片段来避免重复代码
        * sql片段，缺点是不灵活
-->
<sql>
<mapper namespace="test">
    <!-- sql字段，用来定义需要起别名的字段，并且能重复使用 -->
    <sql id="brand-seg">
        id,brand_name as brandName,company_name as companyName,ordered,description,status
    </sql>
    <select id="selectAll" resultType="com.kxfevr.entity.Brand">
        <!-- 使用sql字段 -->
        select <include refid="brand-seg"/>
        from tb_brand;
    </select>
</mapper>

<!--
    2. resultMap: 直接将字段和属性匹配上。
-->
<mapper namespace="com.kxfevr.mapper.BrandMapper">
    <!--
        id: 唯一标识
        type: 映射类型，支持别名
    -->
    <resultMap id="brandResult" type="brand">
        <!--
            id: 完成主键字段的映射
            column: 表的列名
            property: 实体类的属性名
            result: 完成一般字段的映射
        -->
        <result column="brand_name" property="brandName"/>
        <result column="company_name" property="companyName"/>
    </resultMap>
    <!-- 用 resultMap 替代 resultType -->
    <select id="selectAll" resultMap="brandResult">
            select * from tb_brand;
    </select>
</mapper>
```

```java
    //1.加载mybatis的核心配置文件，获取 SqlSessionFactory
    String resource = "mybatis-config.xml";
    InputStream inputStream = Resources.getResourceAsStream(resource);
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);

    //2.获取SQLSession对象，用它来执行SQL
    SqlSession sqlSession = sqlSessionFactory.openSession();

    //3.执行sql语句，传入xml里的id，namespace作为标识，id作为索引
    BrandMapper brandMapper = sqlSession.getMapper(BrandMapper.class);

    // 由于是全部数据查询，获得的会是一个对象的集合，所以用List<Brand>
    List<Brand> brands = brandMapper.selectAll();

    System.out.println(brands);

    //4.释放资源
    sqlSession.close();
```


<a id="table1"> 2. 查询详情 </a>





