# SQL

### SQL 通用语法

1. SQL语句可以单行或多行书写，以分号结尾。
2. 使用空格/缩进增加可读性
3. MySQL中SQL语句不分大小写，关键字建议大写
4. 单行注释： `--` 注释内容 （`#` MySQL独有的）
5. 多行注释： `/* 注释内容 */`
6. 分类：
   ![](./image/1721886425521.jpg)

|库创建查询|[表创建/查询](#table1)|[表修改](#table2)||
|-|-|-|-|

### DDL

1. DDL - 数据库操作
```SQL
    -- 查询： 查询所有数据库
    SHOW DATABASES;
    -- 查询当前数据库
    SELECT DATABASE();
    -- 创建, []内都是可省略的
    CREATE DATABASE [IF NOT EXISTS] 数据库名 [DEFAULT CHARSET 字符集][COLLATE 排序规则];
    -- 删除
    DROP DATABASE[IF EXISTS] 数据库名
    -- 使用,在任意数据库内直接使用该命令即可跳到该数据库内
    USE 数据库名
```

2. DDL - 表操作 - <a id="table1">表创建/查询</a>
```SQL
    -- 查询当前数据库所有表
    SHOW TABLES;
    -- 查询表结构
    DESC 表名;
    -- 查询指定表的建表语句, 显示的就是创建表单每一行的创建标准。
    -- 对照建表和建库创建参数
    SHOW CREATE TABLE 表名;

    -- 创建
    CREATE TABLE 表名(
        字段1 Type[COMMENT 字段1注释],
        字段2 Type[COMMENT 字段2注释],
        字段3 Type[COMMENT 字段3注释],
        ......
        字段n Type[COMMENT 字段n注释]
        )[COMMENT 表注释];
```
创建表单举例：![](./image/1721887923179.jpg)
```SQL
    -- mysql是固定命令，必须空行，不空行会报错失败
    mysql> create table tb_user(
        -- 一行一个字段，也就是一列
        -> id int comment'编号',
        -- string 在 MySQL中是 varchar()，括号中是字符数限制
        -> name varchar(50) comment'姓名',
        -> age int comment'年龄',
        -> gender varchar(1) comment'性别'
        -> );
```

### 数据类型
编程因为程序所使用的内容相对比较广泛，所以不需要太在意数据类型
但数据库涉及到存储的优化性，数据类型非常重要。

* **数值数据**
  
![](./image/1721889734815.jpg)

比如说上面案例的age。现今科学年龄不会超过255这个范畴，所以我们可以使用
```SQL
    AGE TINYINT UNSIGNED comment'无符号小整数值'
    -- double()中的参数为，（数据总长度，小数个数）
    score double(4,1) unsigned comment'成绩无负数'

```
* **字符串数据**
  * blob类型是二进制数据（视频，音频），但性能不高，不方便管理。很少使用
  * text类型是文本数据
  * 主要是char和varchar

![](./image/1721890956759.jpg)

**`char`** 是定长字符串，char(10), 如果输入字符少于10，则用空格填补
**`varchar`** 是变长字符串，varchar(10), 输入少于10个字符，则占用空间缩减
但 **`char`** 的性能好，**`varchar`** 性能较差。

* **日期数据**
  
![](./image/1721891671314.jpg)

### <a id="table1">表修改</a>
```sql
    -- 添加字段
    ALTER TABLE 表名 ADD 字段名 TYPE(长度)[COMMENT'注释'][约束]

    -- 举例
    mysql> alter table emp add nickname varchar(10);

    -- 修改字段
    ALTER TABLE 表名 CHANGE 旧字段名 新字段名 TYPE(长度)[COMMENT'注释'][约束]

    -- 举例, 这里要注意 ，table后面跟的是表名，不是字段名
    mysql> ALTER table emp change workno workID varchar(10) comment'员工编号';

    -- 修改数据类型
    ALTER TABLE 表名 MODIFY 字段名 new TYPE(长度)[COMMENT'注释'][约束]

    -- 举例
    mysql> ALTER TABLE emp MODIFY nickname varchar(20);

    -- 删除字段
    ALTER TABLE 表名 DROP 字段名;
    
```