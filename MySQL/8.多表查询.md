[返回首页](./1.MySQL概述.md)

# 多表查询

[内连接](#table1)
[外连接](#table2)

### 多 vs 多 关系

数据库关系有些时候会错综复杂，多对多的关系比如学生选课，不同的学生选不同的课，多门课程也可能有不同的学生。

两张表的数据
![](./image/1722563128014.jpg)![](./image/1722563152974.jpg) 

多vs多的情况下，我们需要建立一个中间表以做过度
这个中间表studentid挂载的是student，courseid挂载的是course
![](./image/1722563916489.jpg)
![](./image/1722564585212.jpg)

### 1 vs 1 

1 vs 1 表主要用来将一张过于庞大的表分拆开来。
![](./image/1722564677006.jpg)
![](./image/1722570257842.jpg)

### 多表查询概述

* 笛卡尔积：是指在数学中，集合A和集合B的所有组合情况。
* 在多表查询时，需要消除无效的笛卡尔积
```sql
-- DBeaver模式，在加载数据库表时给表加了别名，所以后面用别名调用字段列
select * from Example.emp e , Example.dept d  where e.dept_id = d.id;

-- 普通SQL语法
select * from 表名1 , 表名2  where 表名1.dept_id = 表名2.id;
```

### 多表查询分类
1. 连接查询
    * 内连接:相当于查询A、B交集部分数据
    * 外连接:
      * 左外连接:查询左表所有数据，以及两张表交集部分数据
      * 右外连接:查询右表所有数据，以及两张表交集部分数据
    * 自连接:当前表与自身的连接查询，自连接必须使用表别名

### <a id="table1">内连接查询语法</a>
```sql
-- 隐式内连接
SELECT 字段列表 FROM 表1,表2 WHERE 条件;

-- 内连接演示
-- 1. 查询员工姓名，及内联部门的名称
SELECT e.name, d.name FROM Example.emp e , Example.dept d where e.dept_id =d.id;


-- 显式内连接
SELECT 字段列表 FROM 表1[INNER]JOIN 表2 ON 连接条件;
-- 2. 查询员工姓名，及关联部门名称（显式内连接）
SELECT e.name,d.name FROM Example.emp e inner join Example.dept d on e.dept_id =d.id ;
```